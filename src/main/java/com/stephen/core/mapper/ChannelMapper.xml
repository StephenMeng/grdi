<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.stephen.core.mapper.ChannelMapper">
	<resultMap id="BaseResultMap" type="com.stephen.core.model.Channel">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed Feb 15 
			22:49:23 CST 2017. -->
		<id column="channel_id" jdbcType="INTEGER" property="channelId" />
		<result column="model_id" jdbcType="INTEGER" property="modelId" />
		<result column="site_id" jdbcType="INTEGER" property="siteId" />
		<result column="parent_id" jdbcType="INTEGER" property="parentId" />
		<result column="channel_path" jdbcType="VARCHAR" property="channelPath" />
		<result column="lft" jdbcType="INTEGER" property="lft" />
		<result column="rgt" jdbcType="INTEGER" property="rgt" />
		<result column="priority" jdbcType="INTEGER" property="priority" />
		<result column="has_content" jdbcType="BIT" property="hasContent" />
		<result column="is_display" jdbcType="BIT" property="isDisplay" />
		<association property="channelExt" column="channel_id"
			javaType="com.stephen.core.model.ChannelExt">
			<id column="channel_id" jdbcType="INTEGER" property="channelId" />
			<result column="channel_name" jdbcType="VARCHAR" property="channelName" />
			<result column="final_step" jdbcType="TINYINT" property="finalStep" />
			<result column="after_check" jdbcType="TINYINT" property="afterCheck" />
			<result column="is_static_channel" jdbcType="CHAR" property="isStaticChannel" />
			<result column="is_static_content" jdbcType="CHAR" property="isStaticContent" />
			<result column="is_access_by_dir" jdbcType="CHAR" property="isAccessByDir" />
			<result column="is_list_child" jdbcType="CHAR" property="isListChild" />
			<result column="page_size" jdbcType="INTEGER" property="pageSize" />
			<result column="channel_rule" jdbcType="VARCHAR" property="channelRule" />
			<result column="content_rule" jdbcType="VARCHAR" property="contentRule" />
			<result column="link" jdbcType="VARCHAR" property="link" />
			<result column="tpl_channel" jdbcType="VARCHAR" property="tplChannel" />
			<result column="tpl_content" jdbcType="VARCHAR" property="tplContent" />
			<result column="title_img" jdbcType="VARCHAR" property="titleImg" />
			<result column="content_img" jdbcType="VARCHAR" property="contentImg" />
			<result column="has_title_img" jdbcType="BIT" property="hasTitleImg" />
			<result column="has_content_img" jdbcType="BIT" property="hasContentImg" />
			<result column="title_img_width" jdbcType="INTEGER" property="titleImgWidth" />
			<result column="title_img_height" jdbcType="INTEGER" property="titleImgHeight" />
			<result column="content_img_width" jdbcType="INTEGER"
				property="contentImgWidth" />
			<result column="content_img_height" jdbcType="INTEGER"
				property="contentImgHeight" />
			<result column="comment_control" jdbcType="INTEGER" property="commentControl" />
			<result column="allow_updown" jdbcType="BIT" property="allowUpdown" />
			<result column="is_blank" jdbcType="BIT" property="isBlank" />
			<result column="title" jdbcType="VARCHAR" property="title" />
			<result column="keywords" jdbcType="VARCHAR" property="keywords" />
			<result column="description" jdbcType="VARCHAR" property="description" />
			<result column="allow_share" jdbcType="BIT" property="allowShare" />
			<result column="allow_score" jdbcType="BIT" property="allowScore" />

		</association>
		<collection property="channelAttr" ofType="com.stephen.core.model.ChannelAttr"
			column="channel_id">
			<result column="attr_name" jdbcType="VARCHAR" property="attrName" />
			<result column="attr_value" jdbcType="VARCHAR" property="attrValue" />
		</collection>
	</resultMap>

	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by MyBatis 
			Generator, do not modify. This element was generated on Wed Feb 15 22:49:23 
			CST 2017. -->
		channel_id, model_id, site_id, parent_id, channel_path, lft, rgt,
		priority, has_content,
		is_display
	</sql>
	<select id="selectByPrimaryKey" parameterType="java.lang.Integer"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by MyBatis 
			Generator, do not modify. This element was generated on Wed Feb 15 22:49:23 
			CST 2017. -->
		select
		c.*,e.*,a.*
		from s_channel c
		left join s_channel_ext e on
		c.channel_id=e.channel_id
		left join s_channel_attr a on
		c.channel_id=a.channel_id
		where c.channel_id =
		#{channelId,jdbcType=INTEGER}
	</select>
	<select id="selectChild" parameterType="java.lang.Integer"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by MyBatis 
			Generator, do not modify. This element was generated on Wed Feb 15 22:49:23 
			CST 2017. -->
		select
		c.*,e.*,a.*
		from s_channel c
		left join s_channel_ext e on
		c.channel_id=e.channel_id
		left join s_channel_attr a on
		c.channel_id=a.channel_id
		where c.parent_id =
		#{channelId,jdbcType=INTEGER}
	</select>
	<select id="findByPathForTag" parameterType="java.lang.String"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed Feb 15 
			22:49:23 CST 2017. -->
		select
		c.*,e.*,a.*
		from s_channel c
		left join s_channel_ext e on
		c.channel_id=e.channel_id
		left join s_channel_attr a on
		c.channel_id=a.channel_id
		where c.channel_path =
		#{path,jdbcType=VARCHAR}
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
		<!-- WARNING - @mbggenerated This element is automatically generated by MyBatis 
			Generator, do not modify. This element was generated on Wed Feb 15 22:49:23 
			CST 2017. -->
		delete from s_channel
		where channel_id = #{channelId,jdbcType=INTEGER}
	</delete>
	<insert id="insert" parameterType="com.stephen.core.model.Channel">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed Feb 15 
			22:49:23 CST 2017. -->
		<selectKey keyProperty="channelId" order="AFTER" resultType="java.lang.Integer">
			SELECT LAST_INSERT_ID()
		</selectKey>
		insert into s_channel (channel_id, model_id, site_id, parent_id,
		channel_path, lft, rgt, priority, has_content, is_display) values
		(#{channelId,jdbcType=INTEGER}, #{modelId,jdbcType=INTEGER},
		#{siteId,jdbcType=INTEGER}, #{parentId,jdbcType=INTEGER},
		#{channelPath,jdbcType=VARCHAR}, #{lft,jdbcType=INTEGER},
		#{rgt,jdbcType=INTEGER}, #{priority,jdbcType=INTEGER},
		#{hasContent,jdbcType=BIT}, #{isDisplay,jdbcType=BIT})
	</insert>
	<insert id="insertSelective" parameterType="com.stephen.core.model.Channel">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed Feb 15 
			22:49:23 CST 2017. -->
		insert into s_channel
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="channelId != null">
				channel_id,
			</if>
			<if test="modelId != null">
				model_id,
			</if>
			<if test="siteId != null">
				site_id,
			</if>
			<if test="parentId != null">
				parent_id,
			</if>
			<if test="channelPath != null">
				channel_path,
			</if>
			<if test="lft != null">
				lft,
			</if>
			<if test="rgt != null">
				rgt,
			</if>
			<if test="priority != null">
				priority,
			</if>
			<if test="hasContent != null">
				has_content,
			</if>
			<if test="isDisplay != null">
				is_display,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="channelId != null">
				#{channelId,jdbcType=INTEGER},
			</if>
			<if test="modelId != null">
				#{modelId,jdbcType=INTEGER},
			</if>
			<if test="siteId != null">
				#{siteId,jdbcType=INTEGER},
			</if>
			<if test="parentId != null">
				#{parentId,jdbcType=INTEGER},
			</if>
			<if test="channelPath != null">
				#{channelPath,jdbcType=VARCHAR},
			</if>
			<if test="lft != null">
				#{lft,jdbcType=INTEGER},
			</if>
			<if test="rgt != null">
				#{rgt,jdbcType=INTEGER},
			</if>
			<if test="priority != null">
				#{priority,jdbcType=INTEGER},
			</if>
			<if test="hasContent != null">
				#{hasContent,jdbcType=BIT},
			</if>
			<if test="isDisplay != null">
				#{isDisplay,jdbcType=BIT},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.stephen.core.model.Channel">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed Feb 15 
			22:49:23 CST 2017. -->
		update s_channel
		<set>
			<if test="modelId != null">
				model_id = #{modelId,jdbcType=INTEGER},
			</if>
			<if test="siteId != null">
				site_id = #{siteId,jdbcType=INTEGER},
			</if>
			<if test="parentId != null">
				parent_id = #{parentId,jdbcType=INTEGER},
			</if>
			<if test="channelPath != null">
				channel_path = #{channelPath,jdbcType=VARCHAR},
			</if>
			<if test="lft != null">
				lft = #{lft,jdbcType=INTEGER},
			</if>
			<if test="rgt != null">
				rgt = #{rgt,jdbcType=INTEGER},
			</if>
			<if test="priority != null">
				priority = #{priority,jdbcType=INTEGER},
			</if>
			<if test="hasContent != null">
				has_content = #{hasContent,jdbcType=BIT},
			</if>
			<if test="isDisplay != null">
				is_display = #{isDisplay,jdbcType=BIT},
			</if>
		</set>
		where channel_id = #{channelId,jdbcType=INTEGER}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.stephen.core.model.Channel">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed Feb 15 
			22:49:23 CST 2017. -->
		update s_channel
		set model_id = #{modelId,jdbcType=INTEGER},
		site_id =
		#{siteId,jdbcType=INTEGER},
		parent_id = #{parentId,jdbcType=INTEGER},
		channel_path = #{channelPath,jdbcType=VARCHAR},
		lft =
		#{lft,jdbcType=INTEGER},
		rgt = #{rgt,jdbcType=INTEGER},
		priority =
		#{priority,jdbcType=INTEGER},
		has_content = #{hasContent,jdbcType=BIT},
		is_display = #{isDisplay,jdbcType=BIT}
		where channel_id =
		#{channelId,jdbcType=INTEGER}
	</update>
	<select id="selectPart" parameterType="java.lang.Integer"
		resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from s_channel limit #{count ,jdbcType=INTEGER}
	</select>
	<select id="selectAll" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from s_channel
	</select>
	<select id="selectByParentId" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from s_channel where parent_id = #{channelId ,jdbcType=INTEGER}
	</select>
	<select id="selectLastId" resultType="java.lang.Integer">
		select LAST_INSERT_ID()
	</select>
</mapper>